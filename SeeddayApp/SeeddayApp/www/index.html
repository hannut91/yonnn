<!DOCTYPE html>
<html ng-app="DemoApp" class="introback" style="height:100%">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" , target-densitydpi="device-dpi">
    <title>SeeddayApp</title>

    <!-- 자바스크립트 -->
    <script type="text/javascript" src="scripts/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="scripts/splashscreen.js"></script>
    <script type="text/javascript" src="scripts/keyboard.js"></script>
    <script type="text/javascript" src="scripts/SQLitePlugin.js"></script>
    <script type="text/javascript" src="scripts/angular.min.js"></script>
    <script type="text/javascript" src="scripts/angular-touch.min.js"></script>
    <script type="text/javascript" src="scripts/angular-carousel.min.js"></script>

    <!-- CSS -->
    <link href="css/Seedday.css" rel="stylesheet" />
    

</head>
<body style="height:100%;margin:0px;overflow:hidden" ng-controller="DemoCtrl">

    <!--하단 버튼-->
    <div class="bottomBtn">
        <p><img src="images/intro_plus.png" />작은시작 다짐하기</p>
    </div>
    <!--//하단 버튼-->
    <!--다짐 기록하기 팝업-->
    <div name="popupView1" id="popupView1Id" class="popupView1">
        <div class="popupDecoWrap">
            <img class="popupDeco" src="images/popup_deco1.png" />
            <h2 class="popupDecoText">D-Day</h2>
        </div>
        <div class="popupDecoWrap2">
            <img class="popupDecoImg" src="images/popup_deco2.png" />
        </div>
        <h1><span class="popupText1">작은시작 다짐하기</span></h1>
        <input id="goalInput" type="text" placeholder="여기를 눌러 작은다짐을 작성해주세요" />
        <section id="popupView1BtnId" class="popupView1Btn">
            <p>확인</p>
        </section>
    </div>
    <section id="popupView2Id" class="popupView1">
        <div class="popupDecoWrap">
            <img class="popupDeco" src="images/popup_deco1.png" />
            <h2 class="popupDecoText">D-Day</h2>
        </div>
        <div class="popupDecoWrap2">
            <img class="popupDecoImg" src="images/popup_deco2.png" />
        </div>
        <h1><span class="popupText1">작은시작 다짐 확인 </span></h1>
        <h3 id="goalInputTarget"></h3>
        <p class="fightingText">당신의 시작을 응원합니다</p>
        <section id="popupView2BtnId" class="popupView1Btn">
            <p>확인</p>
        </section>
    </section>
    <!--//다짐 기록하기 팝업-->
    <!--식물 선택하기 팝업-->
    <section id="popupView3Id" class="popupView1">
        <div class="popupDecoWrap">
            <img class="popupDeco" src="images/popup_deco1.png" />
            <h2 class="popupDecoText">D-Day</h2>
        </div>
        <div class="popupDecoWrap2">
            <img class="popupDecoImg" src="images/popup_deco2.png" />
        </div>
        <h1><span class="popupText1">식물 선택하기</span></h1>
        <div>
            <div class="details">
            </div>
            <div class="carousel-demo" style="position:relative">
                <ul rn-carousel rn-carousel-controls rn-carousel-index="carouselIndex"  class="carousel5">
                    <li class="mainplant1"></li>
                    <li class="mainplant2"></li>
                    <li class="mainplant3"></li>
                    <li class="mainplant4"></li>
                    <li class="mainplant5"></li>
                    <li class="mainplant6"></li>
                    <li class="mainplant7"></li>
                    <li class="mainplant8"></li>
                    <li class="mainplant9"></li>
                    <li class="mainplant10"></li>
                </ul>
                <div>
                    <hr class="plantBottomLine" />
                </div>
                <input style="display:none" type="text" id="selectPlant" ng-model="carouselIndex">
            </div>
        </div>

        <section id="popupView3BtnId" class="popupView1Btn">
            <p>다음</p>
        </section>
    </section>
    <!--//식물 선택하기 팝업-->

    <script type="text/javascript">
        $(document).ready(function () {
            //splashscreen 숨기기
            setTimeout(function () {
                navigator.splashscreen.hide();
            }, 1000);

        });
        //터치 이벤트 핸들러
        function eventHandler(event, selector) {
            event.stopPropagation();
            event.preventDefault();
            if (event.type === 'touchend') {
                selector.off('click');
            }
        }

        //하단 버튼 클릭 시 애니메이션
        $('.bottomBtn').on('touchend click', function (event) {
            eventHandler(event, $(this));
            $('.bottomBtn').css({
                "-webkit-animation-name": 'downBtn',
            });
            $('#popupView3Id').addClass("on");
            var popupWidth = $('#popupView3Id').outerWidth();
            var popupHeight = $('#popupView3Id').outerHeight();
            $('#popupView3Id').css({
                "margin-left": -popupWidth / 2,
                "margin-top": -popupHeight / 2
            });

            $('<div id="blind_box"></div>').css('opacity', 0.7).appendTo('body');
        });
        //다음 버튼 클릭하여 식물 선택하기
        $('#popupView3BtnId').on('touchend click', function (event) {
                                 eventHandler(event, $(this));
                                 $('#popupView3Id').removeClass("on");
                                 $('#popupView1Id').addClass("on");
                                 var popupWidth = $('#popupView1Id').outerWidth();
                                 var popupHeight = $('#popupView1Id').outerHeight();
                                 $('#popupView1Id').css({
                                                        "margin-left": -popupWidth / 2,
                                                        "margin-top": -popupHeight / 2
                                                        });
                                 });
        // 다짐 작성후 확인버튼 클릭시
        $('#popupView1BtnId').on('touchend click', function (event) {
            eventHandler(event, $(this));

            if ($('#popupView1Id input').val() != "") {
            document.getElementById("goalInputTarget").innerHTML = '"'+$("#goalInput").val()+'"';
            $('#popupView1Id').removeClass("on");
            $('#popupView2Id').addClass("on");
            var popupWidth = $('#popupView2Id').outerWidth();
            var popupHeight = $('#popupView2Id').outerHeight();
            $('#popupView2Id').css({
                "margin-left": -popupWidth / 2,
                "margin-top": -popupHeight / 2
            });
            Keyboard.hide();
            }
            else {
                alert("내용을 입력해주세요.");
            }
        });

        //버튼 클릭시 지정한 페이지로 이동
        $('#popupView2BtnId').on('touchend click', function (event) {
            eventHandler(event, $(this));

            /*목표, 달, 날짜 저장하기
            localStorage.setItem('goal',$('#goalInput').val());
            localStorage.setItem('curDate', new Date());
            location = "second.html";
            */
            /*
            backgroundtask.start(temp);
            function temp(){
                var db = window.sqlitePlugin.openDatabase({ name: "seed.db" });

                db.executeSql("CREATE TABLE SEEDDAY (ID INT PRIMARY KEY, GOAL TEXT, CURDATE TEST, DAY1 TEXT, DAY2 TEXT, DAY3 TEXT)");
                db.executeSql('INSERT INTO seedday (goal, curdate) VALUES("' + $('#goalInput').val() + '", "' + new Date() + '")');

            }
            location = "second.html";


            */

            /*var db = window.sqlitePlugin.openDatabase({ name: "seed.db" });
            db.transaction(function (tx) {
                tx.executeSql('DROP TABLE IF EXISTS seedday');
                tx.executeSql("CREATE TABLE SEEDDAY (ID INT PRIMARY KEY, GOAL TEXT, CURDATE TEST, DAY1 TEXT, DAY2 TEXT, DAY3 TEXT)");
                tx.executeSql('INSERT INTO seedday (goal, curdate) VALUES("' + $('#goalInput').val() + '", "' + new Date() + '")');
            });
            location = "second.html";
            */
            var db = window.sqlitePlugin.openDatabase({ name: "seed.db" });
            db.transaction(function (tx) {
                tx.executeSql('INSERT INTO seedday (goal, curdate, plantnumber) VALUES("' + $('#goalInput').val() + '", "' + new Date() + '", "' + $('#selectPlant').val() + '")');
            });
            location = "second.html";

        });
        angular.module('DemoApp', [
            'angular-carousel'
        ])

        .controller('DemoCtrl', function ($scope) {

            $scope.colors = ["#fc0003", "#f70008", "#f2000d", "#ed0012", "#e80017", "#e3001c", "#de0021", "#d90026", "#d4002b", "#cf0030", "#c90036", "#c4003b", "#bf0040", "#ba0045", "#b5004a", "#b0004f", "#ab0054", "#a60059", "#a1005e", "#9c0063", "#960069", "#91006e", "#8c0073", "#870078", "#82007d", "#7d0082", "#780087", "#73008c", "#6e0091", "#690096", "#63009c", "#5e00a1", "#5900a6", "#5400ab", "#4f00b0", "#4a00b5", "#4500ba", "#4000bf", "#3b00c4", "#3600c9", "#3000cf", "#2b00d4", "#2600d9", "#2100de", "#1c00e3", "#1700e8", "#1200ed", "#0d00f2", "#0800f7", "#0300fc"];

            function getSlide(target, style) {
                var i = target.length;
                return {
                    id: (i + 1),
                    label: 'slide #' + (i + 1),
                    img: 'http://lorempixel.com/450/300/' + style + '/' + ((i + 1) % 10),
                    color: $scope.colors[(i * 10) % $scope.colors.length],
                    odd: (i % 2 === 0)
                };
            }

            function addSlide(target, style) {
                target.push(getSlide(target, style));
            };

            $scope.carouselIndex = 0;


            function addSlides(target, style, qty) {
                for (var i = 0; i < qty; i++) {
                    addSlide(target, style);
                }
            }

            /* 1st ngRepeat demo
            $scope.slides = [];
            addSlides($scope.slides, 'sports', 50);

            // 2nd ngRepeat demo
            $scope.slides2 = [];
            addSlides($scope.slides2, 'sports', 10);

            // 3rd ngRepeat demo
            $scope.slides3 = [];
            addSlides($scope.slides3, 'people', 50);

            // 4th ngRepeat demo
            $scope.slides4 = [];
            addSlides($scope.slides4, 'city', 50);


            // 5th ngRepeat demo
            $scope.slides6 = [];
            $scope.carouselIndex6 = 0;
            addSlides($scope.slides6, 'sports', 10);
            
            $scope.addSlide = function (at) {
                if (at === 'head') {
                    $scope.slides6.unshift(getSlide($scope.slides6, 'people'));
                } else {
                    $scope.slides6.push(getSlide($scope.slides6, 'people'));
                }
            }
            */
            // End to End swiping
            // load 130 images in main javascript container
            var slideImages = [];
            addSlides(slideImages, 'sports', 10);
            addSlides(slideImages, 'people', 10);
            addSlides(slideImages, 'city', 10);
            addSlides(slideImages, 'abstract', 10);
            addSlides(slideImages, 'nature', 10);
            addSlides(slideImages, 'food', 10);
            addSlides(slideImages, 'transport', 10);
            addSlides(slideImages, 'animals', 10);
            addSlides(slideImages, 'business', 10);
            addSlides(slideImages, 'nightlife', 10);
            addSlides(slideImages, 'cats', 10);
            addSlides(slideImages, 'fashion', 10);
            addSlides(slideImages, 'technics', 10);
            $scope.totalimg = slideImages.length;
            $scope.galleryNumber = 1;
            console.log($scope.galleryNumber);

            function getImage(target) {
                var i = target.length
                    , p = (($scope.galleryNumber - 1) * $scope.setOfImagesToShow) + i;
                console.log("i=" + i + "--" + p);

                return slideImages[p];
            }
            function addImages(target, qty) {

                for (var i = 0; i < qty; i++) {
                    addImage(target);
                }
            }

            function addImage(target) {
                target.push(getImage(target));
            }

            $scope.slides7 = [];
            $scope.carouselIndex7 = 0;
            $scope.setOfImagesToShow = 3;
            addImages($scope.slides7, $scope.setOfImagesToShow);

            $scope.loadNextImages = function () {
                console.log("loading Next images");
                if (slideImages[slideImages.length - 1].id !== $scope.slides7[$scope.slides7.length - 1].id) {
                    // Go to next set of images if exist
                    $scope.slides7 = [];
                    $scope.carouselIndex7 = 0;
                    ++$scope.galleryNumber;
                    addImages($scope.slides7, $scope.setOfImagesToShow);
                } else {
                    // Go to first set of images if not exist
                    $scope.galleryNumber = 1;
                    $scope.slides7 = [];
                    $scope.carouselIndex7 = 0;
                    addImages($scope.slides7, $scope.setOfImagesToShow);
                }
            }
            $scope.loadPreviousImages = function () {
                if (slideImages[0].id !== $scope.slides7[0].id) {
                    // Go to previous set of images if exist
                    $scope.slides7 = [];
                    $scope.carouselIndex7 = 0;
                    --$scope.galleryNumber;
                    addImages($scope.slides7, $scope.setOfImagesToShow);
                } else {
                    // Go to last set of images if not exist
                    console.log("slideimageslength: " + slideImages.length + ", " + slideImages.length - 1 / $scope.setOfImagesToShow);
                    // console.log("slideimageslength: " + slideImages.length );
                    $scope.galleryNumber = slideImages.length / $scope.setOfImagesToShow;
                    $scope.slides7 = [];
                    $scope.carouselIndex7 = 0;
                    addImages($scope.slides7, $scope.setOfImagesToShow);
                    console.log("no images left");
                }

            }

        })



    </script>



    <script src="cordova.js"></script>
    <script src="scripts/platformOverrides.js"></script>
    <script src="scripts/index.js"></script>

</body>

</html>